---
layout: post
title: 카드 결제 API 붙이기
date: 2019-10-27 23:00:00 +0900
category: 서버
tags: 카드, 결제, javascript
---

## 신용카드 결제는 필수
신용카드 결제 기능은 기본 중에 기본이지만 그동안 grey한 이유로 사용을 안하다가  
더 나은 서비스를 위해 기능을 붙이기 되었습니다.  
소비자로써 각종 신용카드 혜택을 받으려고 노력하다가 판매자로써 신용카드 수수료를 생각하니 혈압이...  
그래도 고객을 위해서라면 또 자동화를 위해서라면 눈물을 머금고 사용해야 합니다.  

## 연동사, PG사 선정

PG사란 간단히 말해 카드사에 연동해 결제를 처리해 주는 연결자 입니다.  
조그만 스타트업이 신한카드, 현대카드 등 각 대형 카드업체와 직접 계약을 맺고 연동하기는 불가능하기 때문에 이를 중간에 PG사가 대행해 처리해 줍니다.  
그래서 PG사와 계약해서 진행하면 되는데, 수수료가 비쌉니다.  
직계약 하지 않고 PG사와 다시 중간 연동 서비스를 제공하는 업체(아임포트, 부트페이)를 통해 계약하면 단체계약이 되어서인지 수수료가 낮아집니다.    
물론 회사가 커져서 영향력이 있다면 PG사와 직접 수수료 네고를 할 순 있겠지만  
사업을 시작하는 스타트업은 이런 회사를 껴서 일하면 좋겠죠?  
개발도 물론 표준화되었기 때문에 편해집니다.  
  
![pg사]({{site.baseurl}}/assets/img/pg.jpg)
  
연동서비스를 제공하는 회사는 '아임포트([https://www.iamport.kr/](https://www.iamport.kr/ "iamport"))'와 '부트페이([https://www.bootpay.co.kr/](https://www.bootpay.co.kr/ "bootpay"))'등이 있습니다.  
아임포트가 독보적인 것 같고 저역시 이 회사를 고려했지만  
언더독을 응원하고 싶은 삐딱한 마음도 있고  
아임포트는 jQuery 기반으로 동작하기 때문에 jQuery 1.0 이상이 반드시 설치되어 있어야 합니다.  
라는 문구를 보고 마음이 떠났습니다. jQuery는 아무래도 쌈빡하지 않...  
하지만 딱히 이런 것이 없다면 아임포트가 안전할 것 같아요.  
부트페이의 장점은 복수 PG사를 골랐을때 10만원의 추가 수수료가 없고 데이터분석료가 무료입니다.  
(하지만 데이터분석은 Google Analytics로 하세요...)  

이제 PG사를 선택해야 합니다.

가장 유명한 PG사는 '이니시스' 일 겁니다. 온라인 쇼핑을 다들 하시니까 카드결제할때 봤을 거에요.  
어느 회사를 고르건 신용카드 수수료는 3.2%로 동일합니다. ㅜㅜ 여전히 비쌈.  
(영세/중소 사업자는 카드수수료 할인이 있다고 하는데, 첫해는 적용이 안되는 것 같네요)  
혹시 더 저렴한 수수료로 이용할 수 있는 방법 있으면 알려주세요.  
저도 바꾸게...  
그냥 '다날'이 정기결제 기능도 있고 많이 들어봐서 그냥! 선택했습니다.  
(사실 업체에서 페이앱 이라는 마이너 업체 하는게 어떻냐 해서 골랐었는데 UI가 구려서 다시 바꿨습니다)  

아, 그리고 해외카드 결제는 https://stripe.com 을 쓰면 된다네요.  

## 적용
부트페이와 같은 업체에서 하라는 데로 개발하면 PG사와 연동시켜서 잘 처리가 됩니다.  
그 다음에 PG사에서 보증보험 가입 등등도 하라고 하는데, 이 역시 하라는 데로 하면 됩니다.  
유선번호가 필요하다고 하여 070 번호도 하나 따서 홈페이지 하단에 잘 노출합니다.   
온라인 판매이니 통신판매업 등록도 필요합니다.  
쉽죠?  

신용카드, 실시간 계좌이체, 가상계좌, 휴대폰 소액결제 등이 있는데  
신용카드, 가상계좌 정도만 필요한 것 같아 이것만 선택했습니다.  
그럼~ 이제 돈을 벌 수 있습니다.  

## 그리고 추가로 몇가지 고민이 있습니다.

1. 환불
카드결제는 수수료 3.2%를 뗘가니까 비싼데, 수수료 없이 환불이 되고 깔끔합니다.  
반대로 가상계좌는 정액 300원만 수수료를 내니 좋은데,  
환불의 개념이 없으니 별도로 이체수수료를 내고 이체를 해줘야 합니다. 
(관련 API가 있지만, 환불이 아니고 어쨋든 별개 입금이라서 깔끔하지 못함)  

2. 빌링키 
카드번호를 PG사가 저장하여 사용자가 매번 입력하지 않아도 결제를 시켜주는 정기결제가 있습니다.  
우리는 빌링키만을 발급받아 처리하면 되는 것인데,  
사용자만 안심하면 적용하는 것도 좋을 것 같습니다.  
다만 신용카드 번호를 저장하는 것을 우려하는 소비자가 있을 것도 같습니다. (안전하겠지만)  


## 수수료ㅜㅜ
카드결제는 편하지만 소상공인들에게는 수수료가 부담이 많이 되네요.  
인터넷상에서 욕을 많이 먹는 제로페이의 수수료가 얼마가 될 지 모르겠지만 약간 기대가 됩니다.  
중국의 위챗페이나 알리페이가 0~0.6% 라고 하니 우리나라도 빨리 핀테크 경쟁을 통해 개선이 되면 좋겠습니다.
