---
layout: post
title: javascript array.length 가 내 예상과 안맞는 경우
date: 2020-01-30 17:00:00 +0900
category: 
tags: javascript, length
---


# 내가 만든 array의 length가 왜 안 맞지??
javascript에서 array에 .length를 붙여 길이를 구하고자 할때 맞지 않는 경우가 있고  
이로 인해 의도치 않은 동작을 발생시킬 수 있는 위험이 있어 기록해 봅니다.  

# length 의 함정 
보통의 경우 .length 를 통해 길이값을 구합니다.
```
const uu = "crying";
console.log(uu.length); // 결과값 6

const alist = ['a', 'b', 'c'];
console.log(alist.length); // 결과값 3
```
string 값이건 array건 상상한데로 나오죠?

그런데 함정이 숨어 있습니다.

```
const blist = [];
blist[1] = 'a';
blist[2] = 'b';
blist[3] = 'c';
console.log(blist.length);
```

결과값이 몇이 나와야 할까요? 3개의 값이 들어갔으니 3 아닌가요?

![expect](https://user-images.githubusercontent.com/7343388/73430330-24796880-4381-11ea-960a-fb6e99ea8169.jpg)


**4가 나옵니다.**

blist를 뜯어서 다시 살펴보면 [ , 'a', 'b', 'c'] 와 같습니다.  
blist[0] 을 정의하지 않았으나 빈값(undefined)으로 남아있고   
[0], [1], [2], [3] 이니 이 길이값 4를 뽑아주게 됩니다.  
다시 말해 마지막 item 인덱스값 3+1이 나오죠.  

그런데 보통은 모르고 지나치기 쉽상입니다.
예를 들어
```
let leng = 0;
blist.forEach(
  i => leng+=1
);
console.log(leng);
```
이와 같이 undefined 를 자동으로 제외시켜주는 forEach를 사용하면 상식처럼 3을 뽑아주거든요.

이 경우 쉽게 상식적으로 생각하는 length를 뽑는 방법은 이와 같습니다.
```
console.log(Object.keys(blist).length);
```

또 한가지 재미있는 경우를 볼까요?
```
const c = [];
c.foo = 'fo';
c.bar = 'ba';
```
이때 c.length와 Object.keys(c).length 의 값은 뭘까요?

# javascript의 상식
javascript에는 우리가 기대하지 않는 결과가 가끔 튀어 나오게 됩니다.  
유명한 Date()의 getMonth() 처럼요.  

사람마다 상식이나 기대하는 바가 다른 것 처럼 어떤 것은 조금씩 다른 경우가 있으니  
기억해 두었다가 실수 하는 일이 없어야 겠습니다.  

"마트가서 우유 2개 사오고 달걀 있으면 6개 사와!!"

적어도 동일하게는 작동은 해 주잖아요~

