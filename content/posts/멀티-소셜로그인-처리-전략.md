---
template: post
title: 멀티 소셜로그인 처리 전략
date: 2020-07-27T07:37:15.040Z
description: 소셜로그인을 여러개 지원할때 어떻게 처리해야 할지 고민해 봅시다
category: 서버
tags:
  - 소셜로그인
  - 전략
  - 비즈니스로직
---
나의 사이트가 자체로그인 및 소셜로그인을 여러개 지원할때 어떻게 유저관리를 할 것인가에 대한 글 입니다. (자체로그인 : 사이트 자체에서 아이디/비밀번호 를 통해 가입시키는 일반적인 방법)

1. 소셜로그인이란? facebook, google, naver, kakao 등에서 사용하는 아이디/비번 으로 다른 사이트에서 사용할 수 있다면?
   신규 서비스에 가입하는 것 자체가 
2. 이 서비스가 내 비밀번호를 제대로 암호화 해서 보관하는 지도 의문이고
3. 이 서비스가 내 개인정보만 팔아먹으려는 건지도 의문이고
4. 아이디/패스워드를 새로 입력하는 것도 귀찮습니다. 이런 이유로 신뢰도가 낮은 신생서비스는 가입 자체가 회원을 끌어들이는 것에 장벽이 됩니다.
   그래도 가입은 시켜야 하잖아요?

그래서 이미 익숙하고 가입되어 있는 유명 회사의 정보와 보안서비스를 이용해 가입시키면 고객과 내가 모두 좋습니다~
바로 구글, 페이스북, 네이버, 카카오 같은 것이죠. 

2. 로그인 처리 방식
3. 로그인 단위로 처리하기 자체로그인과 개별 소셜 로그인을 각각 개별 유저로 등록해서 사용합니다.
   때론 동일한 유저가 어떤때는 카카오를 이용해 로그인하고 어떤때는 페이스북을 이용해 로그인 하기도 합니다.
   이런후 고객센터로 기존 정보들이 다 사라졌다고 항의할 수도 있습니다.
   이런 문제가 있기 때문에 요즘 몇 서비스에서는 한가지 소셜로그인을 전면에 내세우고
   한번 더 클릭을 해야 전체 로그인 옵션이 나오도록 유도하고 있죠.
   카카오 로그인이 먼저 노출된다면 대부분 이걸 먼저 시도할테고, 다른 소셜로그인을 시도해서 나타날 위와 같은 혼동을 줄일 수 있겠죠.
4. 자체로그인에 소셜 로그인을 연결하기 어떤 서비스에서는 이런 혼동을 막기위해 소셜로그인 직후 자체로그인을 무조건 하도록 강제합니다. 
   이때 회원가입을 안해서 자체로그인 아이디가 없다면 회원가입을 해야 합니다. 
   이건 실은 자체로그인 부터 하고 여기에 소셜로그인을 묶어놓는 셈인데,
   소셜로그인을 쓰는 이유 중 하나가 위에서 말한 3번째 (새로 회원가입을 하는 귀찮음)을 피해주는 것인데
   무조건 회원가입을 시키는 불편을 더해주는 이 방식은 회원가입을 늘리고자 하는 서비스라면 상상할 수 없는 것이죠.
   가능하면 피해야 할 방식 입니다. 
5. 이메일 단위로 처리하기 동일한 유저가 네이버 로그인을 했다가 실수로 카카오 로그인을 했다면?
   이때 이를 구원?할 한가지 방법이 있습니다. 동일한 이메일을 쓰는 지 확인해 보는 것이죠.
   "기존에 네이버 로그인을 통해 xxxx@xxx.com 으로 가입하셨습니다. 이 정보와 통합하시겠습니까?"
   소셜로그인을 하게 되면 유저의 이메일 정보를 얻을 수 있기 때문에 동일한 이메일로 이미 가입했다면
   위와 같은 질문을 던져서 OK를 누른다면 같은 유저로 통합해 주는 방법도 있습니다.
   그런데 가끔은 카카오나 페이스북 등에서는 전화번호만으로 가입을 하는 경우도 있기 때문에
   그리고 각 소셜서비스마다 다른 이메일을 사용해서 가입하는 경우도 있기 때문에
   완벽한 것은 아닙니다.
6. 모든 로그인을 연계 가능하도록 처리 개발자의 성지 stackoverflow를 보면 가장 복잡하지만 정석적으로 처리하고 있습니다.
   2번과 3번을 다 적용해 주고 있으면서도 
   2번과 같이 로그인 후 소셜로그인을 추가할때 이미 별개의 계정으로 등록된 경우에 아래와 같은 에러메시지를 통해 통합요청을 하도록 진행합니다.

두개의 아이디의 정보가 통합시에 충돌할 여지가 있기 때문에 수동으로 처리해 주는 것이겠죠. 다만 이경우도 역시 개발자가 아닌 유저에게는 개념을 설명하기 힘들기 때문에 적용하는 것은 무리가 있을 수 있습니다.

소셜로그인은 작은 스타트업에서 부터 대형 서비스까지 도입하고 있는 편리한 기능입니다. 조금 더 신경써서 개발한다면 조금 더 많은 유저가 가입해서 서비스를 이용할 수 있으니
로그인의 전략도 신경써서 개발하면 좋겠습니다.